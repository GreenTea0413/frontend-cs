# 🚀 Web Vitals & 성능 최적화

## Web Vitals란?
Google이 정의한 사용자 중심 웹 성능 측정 지표 세트
사용자가 웹 페이지를 불러오고, 보고, 상호작용하는 데 걸리는 시간과 반응성을 정량화해서 측정하는 기준
- Lighthouse, PageSpeed Insights, Chrome DevTools에서 자동으로 확인 가능
- 페이지 로딩 속도, 사용자 인터렉션, 시각적 안정성을 핵심 지표로 분류 -> Core Web Vitals
- 핵심 지표를 개선 시킬수록 아래의 효과를 볼 수 있음!
  - 사용자 경험 개선
  - SEO 최적화
  - 전환율 및 수익 중대
  - 개발 생산성 향상 및 운영 효율성 증가

⸻

### Core Web Vitals 주요 지표

| 지표                          | 설명                                                                  | 좋은 기준   |
|-------------------------------|------------------------------------------------------------------------|--------------|
| **LCP (Largest Contentful Paint)** | 페이지 내 가장 큰 콘텐츠가 화면에 나타나는 데 걸린 시간                     | 2.5초 이내   |
| **FID (First Input Delay)**       | 사용자가 처음 상호작용(클릭 등)했을 때 브라우저가 응답하는 데 걸리는 시간 | 100ms 이내   |
| **CLS (Cumulative Layout Shift)** | 페이지에서 예상치 못한 레이아웃 이동이 발생한 비율                        | 0.1 이하     |

- LCP가 크면: “페이지는 떴는데 큰 이미지가 늦게 보여요”
- FID가 크면: “클릭했는데 반응이 느려요”
- CLS가 크면: “읽고 있는데 갑자기 글자가 밀려요”

⸻

### 성능 최적화 전략 예시

| 전략               | 설명                                                  |
|--------------------|-------------------------------------------------------|
| **이미지 최적화**      | WebP 포맷 사용, 사이즈 제한, lazy loading 적용       |
| **코드 스플리팅**      | 페이지별 필요한 코드만 로딩                       |
| **prefetch & preload** | 리소스를 미리 가져오거나 바로 가져오도록 설정         |
| **캐싱 전략 설정**     | HTTP cache, SWR, ISR 등 활용                         |
| **CDN 활용**          | 전 세계 사용자에게 빠른 콘텐츠 제공                  |
| **폰트 최적화**        | preload, font-display: swap 등 사용                   |

•	자동 코드 스플리팅: Next.js는 페이지 단위로 자동 분리 (pages/about.tsx → about.js)<br>
•	수동 코드 스플리팅: next/dynamic으로 특정 컴포넌트 지연 로딩


| 항목       | SWR (Stale-While-Revalidate)                                 | ISR (Incremental Static Regeneration)                           |
|------------|---------------------------------------------------------------|------------------------------------------------------------------|
| **적용 위치**  | 클라이언트 측 (CSR)                                             | 서버 측 (SSR/SSG)                                                 |
| **기반 기술**  | React Hook (예: `useSWR`, `useQuery`)                      | Next.js 빌트인 기능                                               |
| **동작 시점**  | 사용자가 페이지를 열었을 때                                     | 서버가 정적 페이지 요청 받았을 때                                   |
| **동작 방식**  | 브라우저에서 캐시된 데이터를 먼저 보여주고,<br>백그라운드에서 fetch → UI 갱신 | CDN에 있는 오래된 HTML을 보여주고,<br>백그라운드에서 페이지 재생성 (revalidate 시간 경과 시) |
| **결과**     | CSR에서 “데이터”를 갱신                                        | SSG에서 “페이지” 자체를 갱신                                        |
| **캐싱 위치**  | 메모리, localStorage 등 클라이언트 또는 서비스 워커               | Vercel의 CDN (또는 Next.js 서버)                                  |
| **사용 예시**  | 로그인 후 개인화 정보, 대시보드, 실시간 데이터                   | 블로그 포스트, 제품 상세 페이지 등 자주 안 바뀌는 콘텐츠              |

⸻

### 측정 도구 추천

| 도구                          | 특징                                                   |
|-------------------------------|--------------------------------------------------------|
| **Lighthouse**                | 크롬 개발자 도구 내장, 자동 분석 가능                 |
| **PageSpeed Insights**        | 실제 사용자 데이터 + 실험실 데이터 제공               |
| **WebPageTest**               | 상세한 요청별 분석 가능                                |
| **Chrome UX Report (CrUX)**   | 실제 사용자 측정 기반 대시보드                        |
| **Vitals Chrome 확장 프로그램** | 실시간 성능 측정 도구                                   |

Lighthouse를 통해서 직접 비교 해봤음!
Vue.js -> Next.js
| Vue.js                          | Next.js                                                   |
|-------------------------------|--------------------------------------------------------|
| <img width="647" height="390" alt="마이그레이션" src="https://github.com/user-attachments/assets/ea2509ba-e985-4ae0-8571-832d75e5deb4" />|         <img width="556" height="390" alt="마이그레이션2" src="https://github.com/user-attachments/assets/6035fffe-0912-4e50-a4dd-b4b95bc17c6f" />|

⸻

### 요약
- Web Vitals는 사용자 체감 속도와 경험을 수치화한 지표 모음
- LCP, FID, CLS는 가장 중요한 Core Web Vitals로 각각 로딩 속도, 입력 반응성, 레이아웃 안정성을 나타냄
- 성능 최적화는 지표 기반으로 측정하고 lazy load, prefetch, 캐싱, 이미지 최적화, 코드 분할 등을 조합하여 개선함

